"use strict";exports.id=5488,exports.ids=[5488],exports.modules={15488:(e,t,s)=>{s.d(t,{A:()=>u});var r=s(99586),i=s(39547),n=s(87071),a=s(91537),o=s(18864),c=s(75117),l=s(22841);let d=(0,s(21932).A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var x=s(29615),h=s(92159);function u(){let[e,t]=(0,i.useState)([]),[s,u]=(0,i.useState)(!0),[m,j]=(0,i.useState)(!1),v=(0,i.useCallback)(async()=>{try{let e=await fetch("/api/positions"),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to fetch positions");t(s.positions||[])}catch(e){console.error("Error fetching positions:",e),h.o.error("Failed to fetch positions"),t([])}finally{u(!1),j(!1)}},[]),p=(0,i.useCallback)(async()=>{j(!0),await v()},[v]),f=async e=>{try{if(!(await fetch(`/api/positions/${e}`,{method:"DELETE"})).ok)throw Error("Failed to close position");await p(),h.o.success("Position closed successfully")}catch(e){console.error("Error closing position:",e),h.o.error("Failed to close position")}},b=()=>{h.o.info("Roll position functionality coming soon")},g=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),y=e=>`${e>0?"+":""}${e.toFixed(2)}%`;return s?(0,r.jsx)(n.Zp,{children:(0,r.jsx)(n.aR,{children:(0,r.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(l.A,{className:"h-5 w-5 animate-spin"}),"Loading Positions..."]})})}):(0,r.jsxs)(n.Zp,{children:[(0,r.jsx)(n.aR,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.ZB,{children:"Active Positions"}),(0,r.jsxs)(n.BT,{children:[e.length," active option",1!==e.length?"s":""]})]}),(0,r.jsxs)(a.$,{variant:"outline",size:"sm",onClick:p,disabled:m,children:[m?(0,r.jsx)(l.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(d,{className:"h-4 w-4"}),"Refresh"]})]})}),(0,r.jsx)(n.Wu,{children:0===e.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)("p",{children:"No active positions"}),(0,r.jsx)("p",{className:"text-sm",children:"Place your first trade to see positions here"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(c.XI,{children:[(0,r.jsx)(c.A0,{children:(0,r.jsxs)(c.Hj,{children:[(0,r.jsx)(c.nd,{children:"Contract"}),(0,r.jsx)(c.nd,{children:"Qty"}),(0,r.jsx)(c.nd,{children:"Avg Price"}),(0,r.jsx)(c.nd,{children:"Current"}),(0,r.jsx)(c.nd,{children:"P&L"}),(0,r.jsx)(c.nd,{children:"Greeks"}),(0,r.jsx)(c.nd,{children:"Actions"})]})}),(0,r.jsx)(c.BF,{children:e.map(e=>(0,r.jsxs)(c.Hj,{children:[(0,r.jsx)(c.nA,{children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"font-medium",children:e.symbol}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.expiry," $",e.strike,e.type.charAt(0)]})]})}),(0,r.jsx)(c.nA,{children:(0,r.jsx)(o.E,{variant:e.quantity>0?"default":"destructive",children:e.quantity>0?`+${e.quantity}`:e.quantity})}),(0,r.jsx)(c.nA,{children:g(e.avgPrice)}),(0,r.jsx)(c.nA,{children:g(e.currentPrice)}),(0,r.jsx)(c.nA,{children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:`font-medium ${e.pnl>=0?"text-green-600":"text-red-600"}`,children:g(e.pnl)}),(0,r.jsx)("div",{className:`text-sm ${e.pnlPercent>=0?"text-green-600":"text-red-600"}`,children:y(e.pnlPercent)})]})}),(0,r.jsx)(c.nA,{children:(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{children:["Δ ",e.delta.toFixed(3)]}),(0,r.jsxs)("div",{children:["Θ ",e.theta.toFixed(3)]}),(0,r.jsxs)("div",{children:["Γ ",e.gamma.toFixed(3)]}),(0,r.jsxs)("div",{children:["ν ",e.vega.toFixed(2)]})]})}),(0,r.jsx)(c.nA,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(a.$,{variant:"outline",size:"sm",onClick:()=>b(),children:[(0,r.jsx)(d,{className:"h-3 w-3"}),"Roll"]}),(0,r.jsxs)(a.$,{variant:"outline",size:"sm",onClick:()=>f(e.id),children:[(0,r.jsx)(x.A,{className:"h-3 w-3"}),"Close"]})]})})]},e.id))})]})})})]})}},18864:(e,t,s)=>{s.d(t,{E:()=>c});var r=s(99586);s(39547);var i=s(3618),n=s(14662),a=s(17658);let o=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:t,asChild:s=!1,...n}){let c=s?i.DX:"span";return(0,r.jsx)(c,{"data-slot":"badge",className:(0,a.cn)(o({variant:t}),e),...n})}},75117:(e,t,s)=>{s.d(t,{A0:()=>a,BF:()=>o,Hj:()=>c,XI:()=>n,nA:()=>d,nd:()=>l});var r=s(99586);s(39547);var i=s(17658);function n({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,i.cn)("w-full caption-bottom text-sm",e),...t})})}function a({className:e,...t}){return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,i.cn)("[&_tr]:border-b",e),...t})}function o({className:e,...t}){return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,i.cn)("[&_tr:last-child]:border-0",e),...t})}function c({className:e,...t}){return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,i.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function l({className:e,...t}){return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,i.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function d({className:e,...t}){return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,i.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}}};