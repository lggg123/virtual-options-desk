(()=>{var e={};e.id=3514,e.ids=[3514],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},22408:()=>{},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},58856:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},97807:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>c,serverHooks:()=>h,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var a={};r.r(a),r.d(a,{POST:()=>u});var o=r(80702),s=r(35095),n=r(12174),i=r(61439);function p(e){let t=e<0?-1:1,r=1/(1+.3275911*(e=Math.abs(e)/Math.sqrt(2)));return .5*(1+t*(1-((((1.061405429*r+-1.453152027)*r+1.421413741)*r+-.284496736)*r+.254829592)*r*Math.exp(-e*e)))}async function u(e){try{let t=await e.json();for(let e of["spotPrice","strikePrice","timeToExpiry","riskFreeRate","volatility","optionType"])if(!(e in t))return i.NextResponse.json({error:`Missing required field: ${e}`},{status:400});let r=function(e){let t,r,{spotPrice:a,strikePrice:o,timeToExpiry:s,riskFreeRate:n,volatility:i,optionType:u}=e;if(s<=0)return{price:"call"===u?Math.max(0,a-o):Math.max(0,o-a),greeks:{delta:0,gamma:0,theta:0,vega:0,rho:0}};let c=Math.sqrt(s),l=(Math.log(a/o)+(n+.5*i**2)*s)/(i*c),d=l-i*c,h=p(l),x=p(d),M=p(-l),g=p(-d),m=Math.exp(-.5*l*l)/Math.sqrt(2*Math.PI);"call"===u?(t=a*h-o*Math.exp(-n*s)*x,r=h):(t=o*Math.exp(-n*s)*g-a*M,r=-M);let v="call"===u?-(a*m*i/(2*c)+n*o*Math.exp(-n*s)*x)/365:-(a*m*i/(2*c)-n*o*Math.exp(-n*s)*g)/365;return{price:Math.round(100*t)/100,greeks:{delta:Math.round(1e3*r)/1e3,gamma:Math.round(m/(a*i*c)*1e3)/1e3,theta:Math.round(1e3*v)/1e3,vega:Math.round(a*m*c/100*1e3)/1e3,rho:Math.round(1e3*("call"===u?o*s*Math.exp(-n*s)*x/100:-o*s*Math.exp(-n*s)*g/100))/1e3}}}(t);return i.NextResponse.json(r)}catch(e){return console.error("Error calculating option price:",e),i.NextResponse.json({error:"Failed to calculate option price"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/options/price/route",pathname:"/api/options/price",filename:"route",bundlePath:"app/api/options/price/route"},resolvedPagePath:"/workspaces/virtual-options-desk/frontend/src/app/api/options/price/route.ts",nextConfigOutput:"standalone",userland:a}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:h}=c;function x(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[5143,4352],()=>r(97807));module.exports=a})();