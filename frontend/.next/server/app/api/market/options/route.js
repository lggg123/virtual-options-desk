(()=>{var e={};e.id=9417,e.ids=[9417],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},24429:()=>{},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64749:()=>{},84353:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>l,serverHooks:()=>c,workAsyncStorage:()=>u,workUnitAsyncStorage:()=>d});var o={};r.r(o),r.d(o,{GET:()=>p});var s=r(30781),i=r(60554),a=r(31625),n=r(96396);async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("symbol"),o=t.get("expiration");if(!r)return n.NextResponse.json({error:"Symbol is required"},{status:400});let s=`https://query1.finance.yahoo.com/v7/finance/options/${r}`,i=o?`${s}?date=${o}`:s,a=await fetch(i,{headers:{"User-Agent":"Mozilla/5.0"}});if(!a.ok)throw Error(`Failed to fetch options for ${r}`);let p=(await a.json()).optionChain.result[0];if(!p)return n.NextResponse.json({options:[],expirations:[]});let l=p.options[0].calls||[],u=p.options[0].puts||[],d=[...l.map(e=>({strike:e.strike,bid:e.bid,ask:e.ask,last:e.lastPrice,volume:e.volume||0,openInterest:e.openInterest||0,impliedVolatility:e.impliedVolatility||0,delta:0,gamma:0,theta:0,vega:0,expiration:new Date(1e3*p.expirationDates[0]).toISOString(),type:"call"})),...u.map(e=>({strike:e.strike,bid:e.bid,ask:e.ask,last:e.lastPrice,volume:e.volume||0,openInterest:e.openInterest||0,impliedVolatility:e.impliedVolatility||0,delta:0,gamma:0,theta:0,vega:0,expiration:new Date(1e3*p.expirationDates[0]).toISOString(),type:"put"}))],c=p.expirationDates.map(e=>new Date(1e3*e).toISOString().split("T")[0]);return n.NextResponse.json({options:d,expirations:c,underlyingPrice:p.quote.regularMarketPrice})}catch(e){return console.error("Error fetching options chain:",e),n.NextResponse.json({error:"Failed to fetch options data",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/market/options/route",pathname:"/api/market/options",filename:"route",bundlePath:"app/api/market/options/route"},resolvedPagePath:"/workspaces/virtual-options-desk/frontend/src/app/api/market/options/route.ts",nextConfigOutput:"standalone",userland:o}),{workAsyncStorage:u,workUnitAsyncStorage:d,serverHooks:c}=l;function m(){return(0,a.patchFetch)({workAsyncStorage:u,workUnitAsyncStorage:d})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[9683,9146],()=>r(84353));module.exports=o})();