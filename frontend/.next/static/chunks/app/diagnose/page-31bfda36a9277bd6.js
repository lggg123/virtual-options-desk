(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9387],{2363:(e,r,t)=>{Promise.resolve().then(t.bind(t,8279))},5161:(e,r,t)=>{"use strict";t.d(r,{N:()=>a});var n=t(3899),o=t(298);let i=o.env.NEXT_PUBLIC_SUPABASE_URL||"",s=o.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"";i&&s||console.warn("Missing Supabase environment variables");let a=(0,n.createBrowserClient)(i,s)},8279:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});var n=t(5800),o=t(5924),i=t(5161);function s(){var e;let[r,t]=(0,o.useState)(null),[s,a]=(0,o.useState)(!0);(0,o.useEffect)(()=>{l()},[]);let l=async()=>{try{let{data:{user:e},error:r}=await i.N.auth.getUser();t(e),a(!1),r&&console.error("Auth error:",r)}catch(e){console.error("Error checking user:",e),a(!1)}},d=async()=>{try{let e=await fetch("/api/payment/health"),r=await e.json();alert("Health Check Result:\n\n"+JSON.stringify(r,null,2))}catch(e){alert("Error: "+e)}},c=async()=>{if(!r)return void alert("❌ You must be logged in to test checkout!\n\nPlease login first at /login");try{let e=await fetch("/api/payment/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:"premium"})}),r=await e.json();alert("Checkout Result (Status "+e.status+"):\n\n"+JSON.stringify(r,null,2))}catch(e){alert("Error: "+e)}};return(0,n.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(to bottom right, #1a1a2e, #16213e, #0f3460)",padding:"2rem",color:"white",fontFamily:"system-ui, -apple-system, sans-serif"},children:(0,n.jsxs)("div",{style:{maxWidth:"800px",margin:"0 auto",backgroundColor:"rgba(255,255,255,0.1)",padding:"2rem",borderRadius:"12px"},children:[(0,n.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"\uD83D\uDD0D Ultra-Simple Diagnostics"}),(0,n.jsx)("p",{style:{marginBottom:"2rem",opacity:.8},children:"This page checks your authentication and payment API connection!"}),(0,n.jsxs)("div",{style:{padding:"1rem",backgroundColor:r?"rgba(76, 175, 80, 0.2)":"rgba(244, 67, 54, 0.2)",borderRadius:"8px",marginBottom:"1.5rem",border:r?"2px solid #4CAF50":"2px solid #f44336"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.2rem",marginBottom:"0.5rem"},children:s?"⏳ Checking...":r?"✅ Logged In":"❌ Not Logged In"}),!s&&(0,n.jsx)("p",{style:{fontSize:"0.9rem",opacity:.9},children:r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("strong",{children:"Email:"})," ",r.email,(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:"User ID:"})," ",null==(e=r.id)?void 0:e.substring(0,20),"..."]}):(0,n.jsxs)(n.Fragment,{children:["You need to ",(0,n.jsx)("a",{href:"/login",style:{color:"#4CAF50",textDecoration:"underline"},children:"login first"})," to test checkout!"]})})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,n.jsx)("button",{onClick:d,style:{padding:"1rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",fontWeight:"bold"},children:"Test Payment API Health"}),(0,n.jsxs)("button",{onClick:c,disabled:!r,style:{padding:"1rem",backgroundColor:r?"#2196F3":"#666",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:r?"pointer":"not-allowed",fontWeight:"bold",opacity:r?1:.6},children:["Test Checkout Endpoint ",!r&&"(Login Required)"]}),(0,n.jsx)("button",{onClick:()=>{alert("Environment Info:\n\n"+JSON.stringify({url:window.location.href,userAgent:"undefined"!=typeof navigator?navigator.userAgent:"N/A",hasLocalStorage:"undefined"!=typeof localStorage,hasCookies:"undefined"!=typeof document&&""!==document.cookie},null,2))},style:{padding:"1rem",backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer",fontWeight:"bold"},children:"Check Environment"})]}),(0,n.jsxs)("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"rgba(0,0,0,0.3)",borderRadius:"8px"},children:[(0,n.jsx)("h3",{style:{marginBottom:"0.5rem"},children:"Instructions:"}),(0,n.jsxs)("ol",{style:{paddingLeft:"1.5rem"},children:[(0,n.jsx)("li",{children:"Click each button above"}),(0,n.jsx)("li",{children:"Read the popup alerts"}),(0,n.jsx)("li",{children:"Take screenshots of any errors"}),(0,n.jsx)("li",{children:"Share the error messages"})]})]}),(0,n.jsx)("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:(0,n.jsx)("a",{href:"/pricing",style:{color:"#4CAF50",textDecoration:"underline"},children:"← Back to Pricing"})})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[3899,7116,9683,7358],()=>r(2363)),_N_E=e.O()}]);