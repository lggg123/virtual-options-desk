(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{553:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var s=a(3365),r=a(1521),n=a(8159),i=a(9672),l=a(3678),o=a(1401);function c(){let[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(0);async function m(){try{let e=await fetch("/api/positions");if(e.ok){let a=await e.json();t(a.positions||[]);let s=(a.positions||[]).reduce((e,t)=>e+t.currentPrice*t.quantity*100,0);u(s)}}catch(e){console.error("Error fetching positions:",e)}finally{c(!1)}}if((0,r.useEffect)(()=>{m()},[]),a)return(0,s.jsx)(n.Zp,{children:(0,s.jsx)(n.aR,{children:(0,s.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(l.A,{className:"h-5 w-5 animate-spin"}),"Loading Portfolio..."]})})});if(0===e.length)return(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsx)(n.ZB,{children:"Portfolio Positions"}),(0,s.jsx)(n.BT,{children:"Current options positions breakdown"})]}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,s.jsx)(o.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No positions yet"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground max-w-sm",children:"Start trading to build your portfolio. You have $2,000,000 in virtual cash to get started."})]})})]});let x=e.reduce((e,t)=>{let a=e.find(e=>e.symbol===t.symbol&&e.type===t.type),s=t.currentPrice*t.quantity*100;return a?(a.quantity+=t.quantity,a.value+=s):e.push({symbol:t.symbol,type:t.type,quantity:t.quantity,value:s,percentage:0}),e},[]);return x.forEach(e=>{e.percentage=d>0?e.value/d*100:0}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsx)(n.ZB,{children:"Portfolio Positions"}),(0,s.jsx)(n.BT,{children:"Current options positions breakdown"})]}),(0,s.jsx)(n.Wu,{children:(0,s.jsx)("div",{className:"space-y-6",children:x.map(e=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium",children:[e.symbol," ",e.type]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.quantity," contracts"]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-medium",children:["$",e.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.percentage.toFixed(1),"%"]})]})]}),(0,s.jsx)(i.k,{value:e.percentage,className:"h-2"})]},"".concat(e.symbol,"-").concat(e.type)))})})]})}},1892:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7982).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},2711:(e,t,a)=>{"use strict";a.d(t,{b:()=>l});var s=a(1521),r=a(7067),n=a(3365),i=s.forwardRef((e,t)=>(0,n.jsx)(r.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=i},3363:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var s=a(3365),r=a(1521),n=a(8159),i=a(3678),l=a(8760),o=a(1401),c=a(6713);function d(){let[e,t]=(0,r.useState)(null),[a,d]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null);async function x(){try{let e=await fetch("/api/account");if(!e.ok)throw Error("Failed to fetch account data");let a=await e.json();t(a.account)}catch(e){console.error("Error fetching account:",e),m(e instanceof Error?e.message:"Failed to load account data")}finally{d(!1)}}if((0,r.useEffect)(()=>{x()},[]),a)return(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Loading..."}),(0,s.jsx)(i.A,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),(0,s.jsx)(n.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:"--"})})]},e))});if(u||!e)return(0,s.jsxs)(n.Zp,{className:"col-span-4",children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:"Unable to load account data"})}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:u||"Please make sure your account is set up correctly."}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"If this is your first time logging in, the database tables may need to be created. Contact support or run the SQL schema in your Supabase dashboard."})]})]});let h=e.portfolio_value||2e6,f=e.cash_balance||2e6,p=e.total_pnl||0,j=e.total_pnl_percent||0,v=h-f;return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Portfolio Value"}),(0,s.jsx)(l.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:["$",h.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[j>=0?(0,s.jsxs)("span",{className:"text-green-600",children:["+",j.toFixed(2),"%"]}):(0,s.jsxs)("span",{className:"text-red-600",children:[j.toFixed(2),"%"]})," ","all time"]})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Cash Available"}),(0,s.jsx)(l.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:["$",f.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Available for trading"})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total P&L"}),(0,s.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(p>=0?"text-green-600":"text-red-600"),children:[p>=0?"+":"","$",p.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Unrealized gains/losses"})]})]}),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(n.ZB,{className:"text-sm font-medium",children:"Invested"}),(0,s.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:["$",v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"In active positions"})]})]})]})}},3678:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7982).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3760:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var s=a(3365),r=a(1521),n=a(8159),i=a(3414),l=a(3678);function o(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{o(!0);let e=await fetch("/api/trades");if(!e.ok)throw Error("Failed to fetch trades");let a=await e.json();a.success?t(a.data||[]):d(a.error||"Failed to load trades")}catch(e){console.error("Error fetching trades:",e),d("Failed to load recent trades")}finally{o(!1)}})()},[]);let u=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),m=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"});return(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsx)(n.ZB,{children:"Recent Trades"}),(0,s.jsx)(n.BT,{children:"Your latest options transactions"})]}),(0,s.jsx)(n.Wu,{children:a?(0,s.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,s.jsx)(l.A,{className:"h-6 w-6 animate-spin text-muted-foreground"}),(0,s.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Loading trades..."})]}):c?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,s.jsx)("p",{children:c})}):0===e.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,s.jsx)("p",{children:"No trades yet. Start trading to see your history here!"})}):(0,s.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between border-b pb-2 last:border-0",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium",children:[e.symbol," $",e.strike_price,"call"===e.option_type?"C":"P"," ",m(e.expiry_date)]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.quantity," contracts @ $",e.premium.toFixed(2)]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Total: $",(e.premium*e.quantity*100).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)(i.E,{variant:"buy"===e.action?"default":"secondary",children:e.action.toUpperCase()}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:u(e.created_at)})]})]},e.id))})})]})}},4070:(e,t,a)=>{Promise.resolve().then(a.bind(a,9205)),Promise.resolve().then(a.bind(a,3363)),Promise.resolve().then(a.bind(a,4879)),Promise.resolve().then(a.bind(a,553)),Promise.resolve().then(a.bind(a,3760)),Promise.resolve().then(a.bind(a,5561)),Promise.resolve().then(a.t.bind(a,9534,23))},6080:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7982).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},6713:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7982).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},7636:(e,t,a)=>{"use strict";a.d(t,{B8:()=>k,UC:()=>R,bL:()=>A,l9:()=>L});var s=a(1521),r=a(1757),n=a(7197),i=a(7128),l=a(6677),o=a(7067),c=a(2679),d=a(4777),u=a(1081),m=a(3365),x="Tabs",[h,f]=(0,n.A)(x,[i.RG]),p=(0,i.RG)(),[j,v]=h(x),g=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,onValueChange:r,defaultValue:n,orientation:i="horizontal",dir:l,activationMode:h="automatic",...f}=e,p=(0,c.jH)(l),[v,g]=(0,d.i)({prop:s,onChange:r,defaultProp:null!=n?n:"",caller:x});return(0,m.jsx)(j,{scope:a,baseId:(0,u.B)(),value:v,onValueChange:g,orientation:i,dir:p,activationMode:h,children:(0,m.jsx)(o.sG.div,{dir:p,"data-orientation":i,...f,ref:t})})});g.displayName=x;var y="TabsList",b=s.forwardRef((e,t)=>{let{__scopeTabs:a,loop:s=!0,...r}=e,n=v(y,a),l=p(a);return(0,m.jsx)(i.bL,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:s,children:(0,m.jsx)(o.sG.div,{role:"tablist","aria-orientation":n.orientation,...r,ref:t})})});b.displayName=y;var N="TabsTrigger",w=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,disabled:n=!1,...l}=e,c=v(N,a),d=p(a),u=F(c.baseId,s),x=P(c.baseId,s),h=s===c.value;return(0,m.jsx)(i.q7,{asChild:!0,...d,focusable:!n,active:h,children:(0,m.jsx)(o.sG.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...l,ref:t,onMouseDown:(0,r.m)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(s)}),onKeyDown:(0,r.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(s)}),onFocus:(0,r.m)(e.onFocus,()=>{let e="manual"!==c.activationMode;h||n||!e||c.onValueChange(s)})})})});w.displayName=N;var S="TabsContent",D=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,forceMount:n,children:i,...c}=e,d=v(S,a),u=F(d.baseId,r),x=P(d.baseId,r),h=r===d.value,f=s.useRef(h);return s.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(l.C,{present:n||h,children:a=>{let{present:s}=a;return(0,m.jsx)(o.sG.div,{"data-state":h?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:x,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:s&&i})}})});function F(e,t){return"".concat(e,"-trigger-").concat(t)}function P(e,t){return"".concat(e,"-content-").concat(t)}D.displayName=S;var A=g,k=b,L=w,R=D},8475:(e,t,a)=>{"use strict";a.d(t,{C1:()=>b,bL:()=>y});var s=a(1521),r=a(7197),n=a(7067),i=a(3365),l="Progress",[o,c]=(0,r.A)(l),[d,u]=o(l),m=s.forwardRef((e,t)=>{var a,s,r,l;let{__scopeProgress:o,value:c=null,max:u,getValueLabel:m=f,...x}=e;(u||0===u)&&!v(u)&&console.error((a="".concat(u),s="Progress","Invalid prop `max` of value `".concat(a,"` supplied to `").concat(s,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let h=v(u)?u:100;null===c||g(c,h)||console.error((r="".concat(c),l="Progress","Invalid prop `value` of value `".concat(r,"` supplied to `").concat(l,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let y=g(c,h)?c:null,b=j(y)?m(y,h):void 0;return(0,i.jsx)(d,{scope:o,value:y,max:h,children:(0,i.jsx)(n.sG.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":j(y)?y:void 0,"aria-valuetext":b,role:"progressbar","data-state":p(y,h),"data-value":null!=y?y:void 0,"data-max":h,...x,ref:t})})});m.displayName=l;var x="ProgressIndicator",h=s.forwardRef((e,t)=>{var a;let{__scopeProgress:s,...r}=e,l=u(x,s);return(0,i.jsx)(n.sG.div,{"data-state":p(l.value,l.max),"data-value":null!=(a=l.value)?a:void 0,"data-max":l.max,...r,ref:t})});function f(e,t){return"".concat(Math.round(e/t*100),"%")}function p(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function j(e){return"number"==typeof e}function v(e){return j(e)&&!isNaN(e)&&e>0}function g(e,t){return j(e)&&!isNaN(e)&&e<=t&&e>=0}h.displayName=x;var y=m,b=h}},e=>{var t=t=>e(e.s=t);e.O(0,[6911,6301,798,4778,1971,9205,5054,2347,4870,7358],()=>t(4070)),_N_E=e.O()}]);