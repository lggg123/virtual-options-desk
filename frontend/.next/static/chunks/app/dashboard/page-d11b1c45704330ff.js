(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{591:(e,t,s)=>{"use strict";s.d(t,{Label:()=>r});var a=s(5800);s(5924);var n=s(2672),i=s(4756);function r(e){let{className:t,...s}=e;return(0,a.jsx)(n.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}},2443:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var a=s(5800),n=s(5924),i=s(7925),r=s(9398),o=s(5567),l=s(568);function c(){let[e,t]=(0,n.useState)([]),[s,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(0);async function m(){try{let e=await fetch("/api/positions");if(e.ok){let s=await e.json();t(s.positions||[]);let a=(s.positions||[]).reduce((e,t)=>e+t.currentPrice*t.quantity*100,0);u(a)}}catch(e){console.error("Error fetching positions:",e)}finally{c(!1)}}if((0,n.useEffect)(()=>{m()},[]),s)return(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 animate-spin"}),"Loading Portfolio..."]})})});if(0===e.length)return(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Portfolio Positions"}),(0,a.jsx)(i.BT,{children:"Current options positions breakdown"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,a.jsx)(l.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No positions yet"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground max-w-sm",children:"Start trading to build your portfolio. You have $100,000 in virtual cash to get started."})]})})]});let x=e.reduce((e,t)=>{let s=e.find(e=>e.symbol===t.symbol&&e.type===t.type),a=t.currentPrice*t.quantity*100;return s?(s.quantity+=t.quantity,s.value+=a):e.push({symbol:t.symbol,type:t.type,quantity:t.quantity,value:a,percentage:0}),e},[]);return x.forEach(e=>{e.percentage=d>0?e.value/d*100:0}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Portfolio Positions"}),(0,a.jsx)(i.BT,{children:"Current options positions breakdown"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"space-y-6",children:x.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.symbol," ",e.type]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.quantity," contracts"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-medium",children:["$",e.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.percentage.toFixed(1),"%"]})]})]}),(0,a.jsx)(r.k,{value:e.percentage,className:"h-2"})]},"".concat(e.symbol,"-").concat(e.type)))})})]})}},2672:(e,t,s)=>{"use strict";s.d(t,{b:()=>o});var a=s(5924),n=s(3848),i=s(5800),r=a.forwardRef((e,t)=>(0,i.jsx)(n.sG.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var o=r},4135:(e,t,s)=>{"use strict";s.d(t,{Tabs:()=>r,TabsContent:()=>c,TabsList:()=>o,TabsTrigger:()=>l});var a=s(5800);s(5924);var n=s(6543),i=s(4756);function r(e){let{className:t,...s}=e;return(0,a.jsx)(n.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)(n.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)(n.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(n.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",t),...s})}},5143:(e,t,s)=>{Promise.resolve().then(s.bind(s,1171)),Promise.resolve().then(s.bind(s,5629)),Promise.resolve().then(s.bind(s,2443)),Promise.resolve().then(s.bind(s,591)),Promise.resolve().then(s.bind(s,4135)),Promise.resolve().then(s.t.bind(s,1973,23))},5629:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var a=s(5800),n=s(5924),i=s(7925),r=s(5567),o=s(8125),l=s(568),c=s(8206);function d(){let[e,t]=(0,n.useState)(null),[s,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null);async function x(){try{let e=await fetch("/api/account");if(!e.ok)throw Error("Failed to fetch account data");let s=await e.json();t(s.account)}catch(e){console.error("Error fetching account:",e),m(e instanceof Error?e.message:"Failed to load account data")}finally{d(!1)}}if((0,n.useEffect)(()=>{x()},[]),s)return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Loading..."}),(0,a.jsx)(r.A,{className:"h-4 w-4 animate-spin text-muted-foreground"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:"--"})})]},e))});if(u||!e)return(0,a.jsxs)(i.Zp,{className:"col-span-4",children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Unable to load account data"})}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:u||"Please make sure your account is set up correctly."}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"If this is your first time logging in, the database tables may need to be created. Contact support or run the SQL schema in your Supabase dashboard."})]})]});let f=e.portfolio_value||1e5,h=e.cash_balance||1e5,p=e.total_pnl||0,b=e.total_pnl_percent||0,g=f-h;return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Portfolio Value"}),(0,a.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",f.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[b>=0?(0,a.jsxs)("span",{className:"text-green-600",children:["+",b.toFixed(2),"%"]}):(0,a.jsxs)("span",{className:"text-red-600",children:[b.toFixed(2),"%"]})," ","all time"]})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Cash Available"}),(0,a.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",h.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Available for trading"})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Total P&L"}),(0,a.jsx)(l.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(p>=0?"text-green-600":"text-red-600"),children:[p>=0?"+":"","$",p.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Unrealized gains/losses"})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Invested"}),(0,a.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",g.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"In active positions"})]})]})]})}},6543:(e,t,s)=>{"use strict";s.d(t,{B8:()=>S,UC:()=>L,bL:()=>P,l9:()=>Z});var a=s(5924),n=s(346),i=s(1584),r=s(7393),o=s(5422),l=s(3848),c=s(1821),d=s(8869),u=s(6345),m=s(5800),x="Tabs",[f,h]=(0,i.A)(x,[r.RG]),p=(0,r.RG)(),[b,g]=f(x),j=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,onValueChange:n,defaultValue:i,orientation:r="horizontal",dir:o,activationMode:f="automatic",...h}=e,p=(0,c.jH)(o),[g,j]=(0,d.i)({prop:a,onChange:n,defaultProp:null!=i?i:"",caller:x});return(0,m.jsx)(b,{scope:s,baseId:(0,u.B)(),value:g,onValueChange:j,orientation:r,dir:p,activationMode:f,children:(0,m.jsx)(l.sG.div,{dir:p,"data-orientation":r,...h,ref:t})})});j.displayName=x;var v="TabsList",y=a.forwardRef((e,t)=>{let{__scopeTabs:s,loop:a=!0,...n}=e,i=g(v,s),o=p(s);return(0,m.jsx)(r.bL,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:a,children:(0,m.jsx)(l.sG.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:t})})});y.displayName=v;var N="TabsTrigger",w=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,disabled:i=!1,...o}=e,c=g(N,s),d=p(s),u=k(c.baseId,a),x=C(c.baseId,a),f=a===c.value;return(0,m.jsx)(r.q7,{asChild:!0,...d,focusable:!i,active:f,children:(0,m.jsx)(l.sG.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":x,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...o,ref:t,onMouseDown:(0,n.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(a)}),onKeyDown:(0,n.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(a)}),onFocus:(0,n.m)(e.onFocus,()=>{let e="manual"!==c.activationMode;f||i||!e||c.onValueChange(a)})})})});w.displayName=N;var D="TabsContent",F=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:n,forceMount:i,children:r,...c}=e,d=g(D,s),u=k(d.baseId,n),x=C(d.baseId,n),f=n===d.value,h=a.useRef(f);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(o.C,{present:i||f,children:s=>{let{present:a}=s;return(0,m.jsx)(l.sG.div,{"data-state":f?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:x,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&r})}})});function k(e,t){return"".concat(e,"-trigger-").concat(t)}function C(e,t){return"".concat(e,"-content-").concat(t)}F.displayName=D;var P=j,S=y,Z=w,L=F},8206:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9766).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[3899,2164,8626,8862,9196,7116,9683,7358],()=>t(5143)),_N_E=e.O()}]);