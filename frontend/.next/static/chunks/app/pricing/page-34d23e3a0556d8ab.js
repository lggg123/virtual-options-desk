(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6907],{19:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(5800),s=r(5924),l=r(6710),o=r(5161),n=r(216),i=r(1710),c=r(8130),d=r(7145);let h=[{id:"free",name:"Free",price:0,interval:"month",description:"Perfect for getting started",icon:(0,a.jsx)(n.A,{className:"w-6 h-6"}),features:["10 AI stock picks per month","Basic pattern detection","Community support","Email alerts","Mobile app access"]},{id:"pro",name:"Pro",price:29,interval:"month",description:"For serious traders",icon:(0,a.jsx)(i.A,{className:"w-6 h-6"}),popular:!0,features:["100 AI stock picks per month","Advanced pattern detection","ML-powered screening","Real-time alerts","Priority email support","Historical analysis","Custom watchlists"]},{id:"premium",name:"Premium",price:99,interval:"month",description:"For professional traders",icon:(0,a.jsx)(c.A,{className:"w-6 h-6"}),features:["Unlimited AI stock picks","Full API access","Advanced ML screening (200+ factors)","Real-time pattern detection","Priority support (24/7)","Custom indicators","Backtesting tools","Portfolio analytics","Export to CSV/Excel"]}];function u(){let e=(0,l.useRouter)(),[t,r]=(0,s.useState)(null),[n,i]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[m,p]=(0,s.useState)("month");async function x(){try{let e=await fetch("/api/payment/subscription",{credentials:"include"});if(401===e.status)return void u(null);if(e.ok){let t=await e.json();i(t)}}catch(e){console.error("Failed to fetch subscription:",e)}}async function g(t){console.log("\uD83D\uDED2 handleSubscribe called with planId:",t),console.log("\uD83D\uDC64 Current user state:",c),console.log("\uD83D\uDC64 User object:",JSON.stringify(c,null,2));let{data:{user:a},error:s}=await o.N.auth.getUser();if(console.log("\uD83D\uDD0D Double-checking auth:",a?"Logged in as ".concat(a.email):"Not logged in",s),!c&&!a){console.log("❌ No user authenticated, redirecting to login"),alert("Please log in to subscribe"),e.push("/login?redirect=/pricing");return}!c&&a&&(console.log("✅ Found user on double-check, updating state"),u(a)),r(t),console.log("⏳ Loading state set for plan:",t);try{let e="year"===m?"".concat(t,"_yearly"):t;console.log("\uD83D\uDCE6 Sending checkout request for plan:",e),console.log("\uD83C\uDF6A Including credentials in request");let r=await fetch("/api/payment/checkout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({planId:e})});if(console.log("\uD83D\uDCE1 Checkout response status:",r.status),!r.ok){let e=await r.json().catch(()=>({error:"Unknown error"}));throw console.error("❌ Checkout error response:",e),Error(e.error||"Server error: ".concat(r.status))}let a=await r.json();if(console.log("✅ Checkout response data:",a),!a.url)throw console.error("❌ No URL in response:",a),Error("No checkout URL received from server");console.log("\uD83D\uDE80 Redirecting to Stripe checkout:",a.url),window.location.href=a.url}catch(t){console.error("\uD83D\uDCA5 Checkout error:",t);let e=t instanceof Error?t.message:"Failed to start checkout. Please try again.";alert("❌ Checkout Error:\n\n".concat(e,"\n\nPlease check:\n1. You are logged in\n2. Browser console (F12) for details\n3. Payment API is running")),r(null)}}async function f(){r("manage");try{let e=await fetch("/api/payment/portal",{method:"POST"});if(!e.ok)throw Error("Failed to create portal session");let{url:t}=await e.json();window.location.href=t}catch(e){console.error("Portal error:",e),alert("Failed to open billing portal. Please try again."),r(null)}}return(0,s.useEffect)(()=>{!async function(){try{console.log("\uD83D\uDD0D Checking auth on pricing page...");let{data:{user:e},error:t}=await o.N.auth.getUser();if(t){console.error("❌ Auth check error:",t),u(null);return}console.log("✅ Auth check result:",e?"Logged in as ".concat(e.email):"Not logged in"),u(e),e&&await x()}catch(e){console.error("\uD83D\uDCA5 Error checking auth:",e),u(null)}}();let{data:{subscription:e}}=o.N.auth.onAuthStateChange((e,t)=>{var r;console.log("\uD83D\uDD04 Auth state changed:",e,null==t||null==(r=t.user)?void 0:r.email),u((null==t?void 0:t.user)||null),(null==t?void 0:t.user)&&x()});return()=>{e.unsubscribe()}},[]),(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-20 px-4",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-16",children:[(0,a.jsx)("h1",{className:"text-5xl font-bold text-white mb-4",children:"Choose Your Trading Edge"}),(0,a.jsx)("p",{className:"text-xl text-gray-300 mb-8",children:"AI-powered stock analysis and pattern detection for smarter trading"}),(0,a.jsxs)("div",{className:"inline-flex items-center bg-slate-800 rounded-full p-1",children:[(0,a.jsx)("button",{onClick:()=>p("month"),className:"px-6 py-2 rounded-full text-sm font-medium transition-all ".concat("month"===m?"bg-purple-600 text-white":"text-gray-400 hover:text-white"),children:"Monthly"}),(0,a.jsxs)("button",{onClick:()=>p("year"),className:"px-6 py-2 rounded-full text-sm font-medium transition-all ".concat("year"===m?"bg-purple-600 text-white":"text-gray-400 hover:text-white"),children:["Yearly",(0,a.jsx)("span",{className:"ml-2 text-xs bg-green-500 text-white px-2 py-1 rounded-full",children:"Save 17%"})]})]})]}),n&&"free"!==n.plan&&(0,a.jsx)("div",{className:"mb-8 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-xl font-bold mb-1",children:["Current Plan: ",n.plan.charAt(0).toUpperCase()+n.plan.slice(1)]}),(0,a.jsxs)("p",{className:"text-purple-100",children:["Status: ",n.status,n.cancelAtPeriodEnd&&" (Cancels at period end)"]})]}),(0,a.jsx)("button",{onClick:f,disabled:"manage"===t,className:"bg-white text-purple-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors disabled:opacity-50",children:"manage"===t?"Loading...":"Manage Subscription"})]})}),(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:h.map(r=>{let s=(null==n?void 0:n.plan)===r.id,l="year"===m&&r.price>0?10*r.price:r.price,o="year"===m&&r.price>0?l/12:l;return(0,a.jsxs)("div",{className:"relative bg-slate-800 rounded-2xl p-8 border-2 transition-all duration-300 hover:scale-[1.03] hover:-translate-y-2 flex flex-col ".concat(r.popular?"border-purple-500 shadow-xl shadow-purple-500/20 hover:shadow-purple-500/40":"border-slate-700 hover:border-slate-600 hover:shadow-xl hover:shadow-slate-700/30"),children:[r.popular&&(0,a.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:(0,a.jsx)("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-1 rounded-full text-sm font-semibold",children:"Most Popular"})}),(0,a.jsx)("div",{className:"mb-4 text-purple-400",children:r.icon}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:r.name}),(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:r.description}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-baseline",children:[(0,a.jsxs)("span",{className:"text-5xl font-bold text-white",children:["$",l]}),(0,a.jsxs)("span",{className:"text-gray-400 ml-2",children:["/",m]})]}),"year"===m&&r.price>0&&(0,a.jsxs)("p",{className:"text-sm text-green-400 mt-1",children:["$",o.toFixed(2),"/month"]})]}),(0,a.jsx)("ul",{className:"space-y-3 mb-8 flex-grow",children:r.features.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-green-400 mr-3 flex-shrink-0 mt-0.5"}),(0,a.jsx)("span",{className:"text-gray-300 text-sm",children:e})]},t))}),(0,a.jsx)("button",{onClick:()=>"free"===r.id?e.push("/signup"):g(r.id),disabled:t===r.id||s,className:"w-full py-3 px-6 rounded-lg font-semibold transition-all transform duration-300 ".concat(s?"bg-slate-600 text-slate-400 cursor-not-allowed":r.popular?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 hover:scale-[1.07] hover:shadow-2xl hover:shadow-purple-500/60 hover:-translate-y-1 text-white active:scale-100 active:translate-y-0":"pro"===r.id?"bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-500 hover:to-blue-500 hover:scale-[1.07] hover:shadow-2xl hover:shadow-indigo-500/60 hover:-translate-y-1 text-white active:scale-100 active:translate-y-0 ring-2 ring-transparent hover:ring-indigo-400/50":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 hover:scale-[1.07] hover:shadow-2xl hover:shadow-green-500/60 hover:-translate-y-1 text-white active:scale-100 active:translate-y-0 ring-2 ring-transparent hover:ring-green-400/50"," ").concat(t===r.id?"opacity-70 cursor-wait":""),children:t===r.id?(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):s?"Current Plan":"free"===r.id?"Get Started Free":"Subscribe Now"})]},r.id)})}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-white text-center mb-8",children:"Frequently Asked Questions"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Can I change plans anytime?"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Yes! You can upgrade or downgrade your plan at any time. Changes take effect immediately for upgrades, or at the end of your billing period for downgrades."})]}),(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"What payment methods do you accept?"}),(0,a.jsx)("p",{className:"text-gray-400",children:"We accept all major credit cards (Visa, Mastercard, American Express) through our secure Stripe payment processor."})]}),(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Is there a free trial?"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Our Free plan is available forever with 10 AI picks per month. You can upgrade to Premium or Pro anytime to unlock more features."})]}),(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"What's your refund policy?"}),(0,a.jsx)("p",{className:"text-gray-400",children:"We offer a 14-day money-back guarantee on all paid plans. If you're not satisfied, contact us for a full refund."})]})]})]}),(0,a.jsx)("div",{className:"mt-16 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-8 text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-green-400 mr-2"}),(0,a.jsx)("span",{children:"Cancel Anytime"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-green-400 mr-2"}),(0,a.jsx)("span",{children:"Secure Payments"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-green-400 mr-2"}),(0,a.jsx)("span",{children:"14-Day Guarantee"})]})]})})]})})}},216:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9766).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},1710:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9766).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},5161:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});var a=r(3899),s=r(298);let l=s.env.NEXT_PUBLIC_SUPABASE_URL||"",o=s.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"";l&&o||console.warn("Missing Supabase environment variables");let n=(0,a.createBrowserClient)(l,o)},6710:(e,t,r)=>{"use strict";var a=r(4026);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},7145:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9766).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8130:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9766).A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]])},8859:(e,t,r)=>{Promise.resolve().then(r.bind(r,19))},9766:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var a=r(5924);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),o=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:d="",children:h,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:r,strokeWidth:o?24*Number(l)/Number(s):l,className:n("lucide",d),...!h&&!i(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(h)?h:[h]])}),h=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:i,...c}=r;return(0,a.createElement)(d,{ref:l,iconNode:t,className:n("lucide-".concat(s(o(e))),"lucide-".concat(e),i),...c})});return r.displayName=o(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[3899,7116,9683,7358],()=>t(8859)),_N_E=e.O()}]);