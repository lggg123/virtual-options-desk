(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7552],{1749:(e,t,s)=>{Promise.resolve().then(s.bind(s,6282))},5485:(e,t,s)=>{"use strict";s.d(t,{XC:()=>n,kf:()=>l});var a=s(251);class r{initializeDefaultStocks(){[{symbol:"AAPL",price:182.45,volatility:.25},{symbol:"GOOGL",price:2845.67,volatility:.28},{symbol:"MSFT",price:378.23,volatility:.22},{symbol:"TSLA",price:248.91,volatility:.45},{symbol:"NVDA",price:485.23,volatility:.35},{symbol:"AMZN",price:145.67,volatility:.3},{symbol:"META",price:342.18,volatility:.33},{symbol:"SPY",price:445.23,volatility:.15},{symbol:"QQQ",price:378.91,volatility:.2},{symbol:"IWM",price:195.67,volatility:.25}].forEach(e=>{this.stocks.set(e.symbol,{symbol:e.symbol,price:e.price,lastUpdate:new Date,volatility:e.volatility,volume:Math.floor(1e7*Math.random())+1e6,high:e.price*(1+.02*Math.random()),low:e.price*(1-.02*Math.random()),open:e.price*(1+(Math.random()-.5)*.01)})})}async generateRandomWalk(e,t,s,a){let r=[t],i=1/252/24/60;for(let e=1;e<a;e++){let a=(.05-.5*s*s)*i+s*Math.sqrt(i)*this.generateNormalRandom(),n=Math.max(r[e-1]*Math.exp(a)*(1+.01*this.generateMarketEvent().impact),.5*t);r.push(Math.min(n,2*t))}return r}generateNormalRandom(){let e=0,t=0;for(;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}generateMarketEvent(){let e=Math.random();return e<.95?{type:"normal",impact:0,duration:1}:e<.98?{type:"news",impact:(Math.random()-.5)*2,duration:Math.floor(30*Math.random())+5}:e<.995?{type:"volatility_spike",impact:(Math.random()-.5)*4,duration:Math.floor(60*Math.random())+10}:{type:"earnings",impact:(Math.random()-.5)*6,duration:Math.floor(120*Math.random())+30}}async updatePrices(){for(let[e,t]of this.stocks){if((Date.now()-t.lastUpdate.getTime())/6e4<1)continue;let s=(await this.generateRandomWalk(e,t.price,t.volatility,2))[1],a=s-t.price,r=Math.floor(1e6*Math.random())+5e5,i={...t,price:s,lastUpdate:new Date,volume:t.volume+r,high:Math.max(t.high,s),low:Math.min(t.low,s)};this.stocks.set(e,i),await this.broadcastPriceUpdate(e,i,a)}}async broadcastPriceUpdate(e,t,s){try{let r=a.N.channel("market-data");await r.send({type:"broadcast",event:"price-update",payload:{symbol:e,price:t.price,change:s,changePercent:s/(t.price-s)*100,volume:t.volume,high:t.high,low:t.low,open:t.open,timestamp:t.lastUpdate.toISOString()}});let i=a.N,n={symbol:e,price:t.price,volume:t.volume,high:t.high,low:t.low,open:t.open,updated_at:t.lastUpdate.toISOString()};await i.from("stock_prices").upsert(n)}catch(t){console.error("Failed to broadcast price update for ".concat(e,":"),t)}}start(){this.isRunning||(this.isRunning=!0,this.updateInterval=setInterval(()=>{this.updatePrices().catch(e=>{console.error("Error updating prices:",e)})},this.UPDATE_FREQUENCY),console.log("Market simulator started"))}stop(){this.isRunning&&(this.isRunning=!1,this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null),console.log("Market simulator stopped"))}getStock(e){return this.stocks.get(e)}getAllStocks(){return new Map(this.stocks)}addStock(e,t,s){if(this.stocks.has(e))return void console.warn("Stock ".concat(e," already exists"));this.stocks.set(e,{symbol:e,price:t,lastUpdate:new Date,volatility:s,volume:Math.floor(1e7*Math.random())+1e6,high:t*(1+.02*Math.random()),low:t*(1-.02*Math.random()),open:t*(1+(Math.random()-.5)*.01)})}removeStock(e){return this.stocks.delete(e)}updateVolatility(e,t){let s=this.stocks.get(e);return!!s&&(this.stocks.set(e,{...s,volatility:t}),!0)}simulateMarketCrash(e){for(let[t,s]of this.stocks){let a=1-e/100,r=s.price*a;this.stocks.set(t,{...s,price:r,low:Math.min(s.low,r),lastUpdate:new Date,volatility:1.5*s.volatility})}console.log("Simulated market crash with ".concat(e,"% impact"))}simulateMarketRally(e){for(let[t,s]of this.stocks){let a=1+e/100,r=s.price*a;this.stocks.set(t,{...s,price:r,high:Math.max(s.high,r),lastUpdate:new Date})}console.log("Simulated market rally with ".concat(e,"% impact"))}constructor(){this.UPDATE_FREQUENCY=2e3,this.stocks=new Map,this.isRunning=!1,this.updateInterval=null,this.initializeDefaultStocks()}}let i=null;function n(){return i||(i=new r),i}function l(){n().start(),console.log("\uD83D\uDE80 Market simulation started with real-time price updates")}},6282:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>er});var a=s(3365),r=s(1521),i=s(8159),n=s(5561),l=s(9205),c=s(3155),o=s(8005),d=s(3414),m=s(6296),h=s(4840),u=s(7832),x=s(1401);function p(e){var t,s,n,l;let{onSelectStock:p,currentSymbol:g="AAPL"}=e,[j,y]=(0,r.useState)(""),[v,f]=(0,r.useState)([]),[b,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(null),[S,A]=(0,r.useState)(!1),[C,T]=(0,r.useState)(null),M=(0,r.useRef)(null),F=(0,r.useRef)([{symbol:"AAPL",name:"Apple Inc.",category:"Tech"},{symbol:"MSFT",name:"Microsoft Corporation",category:"Tech"},{symbol:"GOOGL",name:"Alphabet Inc.",category:"Tech"},{symbol:"AMZN",name:"Amazon.com Inc.",category:"Tech"},{symbol:"META",name:"Meta Platforms Inc.",category:"Tech"},{symbol:"NVDA",name:"NVIDIA Corporation",category:"Semiconductors"},{symbol:"TSLA",name:"Tesla Inc.",category:"Automotive"},{symbol:"NFLX",name:"Netflix Inc.",category:"Entertainment"},{symbol:"AMD",name:"Advanced Micro Devices",category:"Semiconductors"},{symbol:"INTC",name:"Intel Corporation",category:"Semiconductors"},{symbol:"QCOM",name:"QUALCOMM Inc.",category:"Semiconductors"},{symbol:"AVGO",name:"Broadcom Inc.",category:"Semiconductors"},{symbol:"TSM",name:"Taiwan Semiconductor",category:"Semiconductors"},{symbol:"ORCL",name:"Oracle Corporation",category:"Software"},{symbol:"ADBE",name:"Adobe Inc.",category:"Software"},{symbol:"CRM",name:"Salesforce Inc.",category:"Software"},{symbol:"NOW",name:"ServiceNow Inc.",category:"Software"},{symbol:"JPM",name:"JPMorgan Chase & Co.",category:"Finance"},{symbol:"BAC",name:"Bank of America Corp.",category:"Finance"},{symbol:"WFC",name:"Wells Fargo & Company",category:"Finance"},{symbol:"GS",name:"Goldman Sachs Group",category:"Finance"},{symbol:"V",name:"Visa Inc.",category:"Finance"},{symbol:"MA",name:"Mastercard Inc.",category:"Finance"},{symbol:"JNJ",name:"Johnson & Johnson",category:"Healthcare"},{symbol:"UNH",name:"UnitedHealth Group",category:"Healthcare"},{symbol:"PFE",name:"Pfizer Inc.",category:"Healthcare"},{symbol:"ABBV",name:"AbbVie Inc.",category:"Healthcare"},{symbol:"WMT",name:"Walmart Inc.",category:"Retail"},{symbol:"HD",name:"Home Depot Inc.",category:"Retail"},{symbol:"COST",name:"Costco Wholesale",category:"Retail"},{symbol:"NKE",name:"Nike Inc.",category:"Consumer"},{symbol:"SBUX",name:"Starbucks Corporation",category:"Consumer"},{symbol:"MCD",name:"McDonald's Corporation",category:"Consumer"},{symbol:"DIS",name:"Walt Disney Company",category:"Entertainment"},{symbol:"XOM",name:"Exxon Mobil Corporation",category:"Energy"},{symbol:"CVX",name:"Chevron Corporation",category:"Energy"},{symbol:"PLTR",name:"Palantir Technologies",category:"Software"},{symbol:"COIN",name:"Coinbase Global",category:"Crypto"},{symbol:"ROKU",name:"Roku Inc.",category:"Entertainment"},{symbol:"SHOP",name:"Shopify Inc.",category:"E-Commerce"},{symbol:"UBER",name:"Uber Technologies",category:"Transportation"},{symbol:"SPY",name:"S&P 500 ETF",category:"ETF"},{symbol:"QQQ",name:"Nasdaq-100 ETF",category:"ETF"},{symbol:"IWM",name:"Russell 2000 ETF",category:"ETF"},{symbol:"DIA",name:"Dow Jones ETF",category:"ETF"}]);(0,r.useEffect)(()=>{j.length>0?(f(F.current.filter(e=>e.symbol.toLowerCase().includes(j.toLowerCase())||e.name.toLowerCase().includes(j.toLowerCase())).slice(0,10)),N(!0)):(f([]),N(!1))},[j]),(0,r.useEffect)(()=>{let e=e=>{M.current&&!M.current.contains(e.target)&&N(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let E=e=>{p(e),y(""),N(!1)};return(0,r.useEffect)(()=>{g&&(A(!0),T(null),k(null),fetch("/api/market/quote?symbol=".concat(encodeURIComponent(g))).then(async e=>{if(!e.ok)throw Error("Failed to fetch market data");return e.json()}).then(e=>{k({price:e.regularMarketPrice,change:e.regularMarketChangePercent,volume:e.regularMarketVolume})}).catch(()=>{T("Could not load live data")}).finally(()=>A(!1)))},[g]),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"w-5 h-5"}),"Stock Selector"]}),(0,a.jsx)(i.BT,{children:"Search or select from popular stocks"})]}),(0,a.jsxs)(i.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"relative",ref:M,children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,a.jsx)(c.p,{type:"text",placeholder:"Search stocks by symbol or name...",value:j,onChange:e=>y(e.target.value),onFocus:()=>j&&N(!0),className:"pl-10"})]}),b&&v.length>0&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-background border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:v.map(e=>(0,a.jsxs)("button",{onClick:()=>E(e.symbol),className:"w-full px-4 py-3 text-left hover:bg-muted transition-colors flex items-center justify-between group",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.symbol}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.E,{variant:"secondary",className:"text-xs",children:e.category}),(0,a.jsx)(h.A,{className:"w-4 h-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})]},e.symbol))})]}),(0,a.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Currently Selected"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:g}),S?(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"Loading price..."}):C?(0,a.jsx)("div",{className:"text-xs text-red-500 mt-1",children:C}):w&&(0,a.jsxs)("div",{className:"text-xs text-gray-400 mt-1 flex gap-4",children:[(0,a.jsxs)("span",{children:["Price: ",(0,a.jsxs)("span",{className:"text-white font-semibold",children:["$",null!=(n=null==(t=w.price)?void 0:t.toFixed(2))?n:"--"]})]}),(0,a.jsxs)("span",{children:["Change: ",(0,a.jsx)("span",{className:w.change&&w.change>=0?"text-green-500":"text-red-500",children:void 0!==w.change?"".concat(w.change>=0?"+":"").concat(w.change.toFixed(2),"%"):"--"})]}),(0,a.jsxs)("span",{children:["Vol: ",(0,a.jsx)("span",{className:"text-white font-semibold",children:null!=(l=null==(s=w.volume)?void 0:s.toLocaleString())?l:"--"})]})]})]}),(0,a.jsx)(d.E,{variant:"outline",children:"Active"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(u.A,{className:"w-4 h-4 text-yellow-500"}),(0,a.jsx)("h3",{className:"font-semibold",children:"Popular Stocks"})]}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2",children:["AAPL","MSFT","GOOGL","AMZN","TSLA","META","NVDA","SPY","QQQ","AMD"].map(e=>(0,a.jsx)(o.$,{variant:g===e?"default":"outline",size:"sm",onClick:()=>E(e),className:"font-mono",children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-green-500"}),(0,a.jsx)("h3",{className:"font-semibold",children:"High Options Volume"})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["SPY","QQQ","TSLA","AAPL","NVDA","AMD"].map(e=>(0,a.jsx)(o.$,{variant:g===e?"default":"outline",size:"sm",onClick:()=>E(e),className:"font-mono",children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Browse by Category"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Tech","Finance","Healthcare","Energy","Retail","ETF","Semiconductors","Software"].map(e=>(0,a.jsx)(d.E,{variant:"outline",className:"cursor-pointer hover:bg-muted transition-colors justify-center py-2",children:e},e))})]})]})]})}var g=s(3049),j=s(6644),y=s(2446),v=s(1e3),f=s(7811),b=s(4130);function N(e){let{...t}=e;return(0,a.jsx)(j.bL,{"data-slot":"select",...t})}function w(e){let{...t}=e;return(0,a.jsx)(j.WT,{"data-slot":"select-value",...t})}function k(e){let{className:t,size:s="default",children:r,...i}=e;return(0,a.jsxs)(j.l9,{"data-slot":"select-trigger","data-size":s,className:(0,b.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[r,(0,a.jsx)(j.In,{asChild:!0,children:(0,a.jsx)(y.A,{className:"size-4 opacity-50"})})]})}function S(e){let{className:t,children:s,position:r="popper",...i}=e;return(0,a.jsx)(j.ZL,{children:(0,a.jsxs)(j.UC,{"data-slot":"select-content",className:(0,b.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...i,children:[(0,a.jsx)(C,{}),(0,a.jsx)(j.LM,{className:(0,b.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(T,{})]})})}function A(e){let{className:t,children:s,...r}=e;return(0,a.jsxs)(j.q7,{"data-slot":"select-item",className:(0,b.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(j.VF,{children:(0,a.jsx)(v.A,{className:"size-4"})})}),(0,a.jsx)(j.p4,{children:s})]})}function C(e){let{className:t,...s}=e;return(0,a.jsx)(j.PP,{"data-slot":"select-scroll-up-button",className:(0,b.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(f.A,{className:"size-4"})})}function T(e){let{className:t,...s}=e;return(0,a.jsx)(j.wn,{"data-slot":"select-scroll-down-button",className:(0,b.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(y.A,{className:"size-4"})})}var M=s(7551),F=s(7584);let E=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(M.bL,{className:(0,b.cn)("grid gap-2",s),...r,ref:t})});E.displayName=M.bL.displayName;let P=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(M.q7,{ref:t,className:(0,b.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,a.jsx)(M.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(F.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});P.displayName=M.q7.displayName;var L=s(4621);function R(e){let{className:t,orientation:s="horizontal",decorative:r=!0,...i}=e;return(0,a.jsx)(L.b,{"data-slot":"separator",decorative:r,orientation:s,className:(0,b.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}var I=s(8541),O=s(4424),D=s(6080),z=s(5842),B=s(9703),U=s(1971);function $(){let[e,t]=(0,r.useState)({symbol:"",optionType:"call",strike:0,expiry:"",quantity:1,price:0,orderType:"limit",action:"buy"}),[s,n]=(0,r.useState)(!1),[l,m]=(0,r.useState)(null),h=()=>e.quantity*e.price*100,u=()=>{let t=[];return e.symbol||t.push("Symbol is required"),e.strike<=0&&t.push("Strike price must be greater than 0"),e.expiry||t.push("Expiry date is required"),e.quantity<=0&&t.push("Quantity must be greater than 0"),"limit"===e.orderType&&e.price<=0&&t.push("Limit price is required"),t},p=async()=>{console.log("Submit order clicked!");let s=u();if(s.length>0)return void U.o.error("Validation Error: ".concat(s.join(", ")));n(!0);try{var a;let s={optionId:"".concat(e.symbol,"-").concat(e.expiry,"-").concat(e.strike,"-").concat(e.optionType),orderType:e.action,quantity:e.quantity,price:"market"===e.orderType?0:e.price};console.log("Placing order:",s);let r=await fetch("/api/options/price/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),i=await r.json();if(!r.ok)throw Error(i.error||"Failed to place order");let n="buy"===e.action?"BUY TO OPEN":"SELL TO OPEN",l="".concat(e.symbol," $").concat(e.strike).concat(e.optionType.charAt(0).toUpperCase()," ").concat(e.expiry);U.o.success("Order Placed Successfully!",{description:"".concat(n," ").concat(e.quantity," ").concat(l," - New Balance: $").concat(null==(a=i.newBalance)?void 0:a.toLocaleString())}),t({symbol:"",optionType:"call",strike:0,expiry:"",quantity:1,price:0,orderType:"limit",action:"buy"}),m(null),window.dispatchEvent(new CustomEvent("orderPlaced",{detail:i}))}catch(e){console.error("Order submission error:",e),U.o.error("Order Failed - ".concat(e instanceof Error?e.message:"Unknown error occurred"))}finally{n(!1)}};return(0,a.jsxs)(i.Zp,{className:"h-fit",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(O.A,{className:"h-5 w-5"}),"Order Entry"]}),(0,a.jsx)(i.BT,{children:"Place options orders"})]}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsx)(o.$,{onClick:()=>{t({symbol:"AAPL",optionType:"call",strike:180,expiry:"2024-02-16",quantity:1,price:3.25,orderType:"limit",action:"buy"}),U.o.info("Form filled with AAPL sample data")},variant:"outline",size:"sm",className:"w-full",children:"Quick Fill AAPL (For Testing)"}),(0,a.jsxs)(E,{value:e.action,onValueChange:s=>t({...e,action:s}),className:"flex space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(P,{value:"buy",id:"buy"}),(0,a.jsxs)(g.J,{htmlFor:"buy",className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 text-green-600"}),"Buy to Open"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(P,{value:"sell",id:"sell"}),(0,a.jsxs)(g.J,{htmlFor:"sell",className:"flex items-center gap-1",children:[(0,a.jsx)(D.A,{className:"h-4 w-4 text-red-600"}),"Sell to Open"]})]})]}),(0,a.jsx)(R,{}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(g.J,{htmlFor:"symbol",children:"Symbol *"}),(0,a.jsx)(c.p,{id:"symbol",placeholder:"AAPL",value:e.symbol,onChange:s=>t({...e,symbol:s.target.value.toUpperCase()})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g.J,{htmlFor:"option-type",children:"Option Type *"}),(0,a.jsxs)(N,{value:e.optionType,onValueChange:s=>t({...e,optionType:s}),children:[(0,a.jsx)(k,{children:(0,a.jsx)(w,{})}),(0,a.jsxs)(S,{children:[(0,a.jsx)(A,{value:"call",children:"Call"}),(0,a.jsx)(A,{value:"put",children:"Put"})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(g.J,{htmlFor:"strike",children:"Strike Price *"}),(0,a.jsx)(c.p,{id:"strike",type:"number",step:"0.01",placeholder:"180.00",value:e.strike||"",onChange:s=>t({...e,strike:parseFloat(s.target.value)||0})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g.J,{htmlFor:"expiry",children:"Expiry Date *"}),(0,a.jsx)(c.p,{id:"expiry",type:"date",value:e.expiry,onChange:s=>t({...e,expiry:s.target.value}),min:new Date().toISOString().split("T")[0]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(g.J,{htmlFor:"quantity",children:"Quantity *"}),(0,a.jsx)(c.p,{id:"quantity",type:"number",min:"1",value:e.quantity,onChange:s=>t({...e,quantity:parseInt(s.target.value)||1})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g.J,{htmlFor:"order-type",children:"Order Type *"}),(0,a.jsxs)(N,{value:e.orderType,onValueChange:s=>t({...e,orderType:s}),children:[(0,a.jsx)(k,{children:(0,a.jsx)(w,{})}),(0,a.jsxs)(S,{children:[(0,a.jsx)(A,{value:"market",children:"Market"}),(0,a.jsx)(A,{value:"limit",children:"Limit"}),(0,a.jsx)(A,{value:"stop",children:"Stop"})]})]})]})]}),"limit"===e.orderType&&(0,a.jsxs)("div",{children:[(0,a.jsx)(g.J,{htmlFor:"price",children:"Limit Price *"}),(0,a.jsx)(c.p,{id:"price",type:"number",step:"0.01",min:"0.01",placeholder:"3.25",value:e.price||"",onChange:s=>t({...e,price:parseFloat(s.target.value)||0})})]}),l&&(0,a.jsxs)(I.Fc,{children:[(0,a.jsx)(z.A,{className:"h-4 w-4"}),(0,a.jsx)(I.TN,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"font-medium",children:"Order Preview:"}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("div",{children:[l.action," ",l.quantity," ",l.contract]}),(0,a.jsxs)("div",{children:["Order Type: ",l.orderType]}),(0,a.jsxs)("div",{children:["Price: ",l.price]}),(0,a.jsxs)("div",{children:["Total Value: $",l.totalValue.toLocaleString()]}),(0,a.jsxs)("div",{children:["Est. Commission: $",l.estimatedCommission.toFixed(2)]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-muted p-4 rounded-lg space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Order Value:"}),(0,a.jsxs)(d.E,{variant:"outline",children:["$",h().toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"Contracts:"}),(0,a.jsx)("span",{children:e.quantity})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"Per Contract:"}),(0,a.jsxs)("span",{children:["$",e.price.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"Commission:"}),(0,a.jsxs)("span",{children:["$",(.65*e.quantity).toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"text-sm",children:["Form Valid: ",0===u().length?"✅ Yes":"❌ No",0!==u().length&&(0,a.jsx)("div",{className:"text-red-600 text-xs mt-1",children:u().join(", ")})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.$,{onClick:()=>{let t=u();if(t.length>0)return void U.o.error("Validation Error: ".concat(t.join(", ")));m({contract:"".concat(e.symbol," ").concat(e.expiry," ").concat(e.strike).concat(e.optionType.charAt(0).toUpperCase()),action:e.action.toUpperCase(),quantity:e.quantity,orderType:e.orderType.toUpperCase(),price:"market"===e.orderType?"Market":"$".concat(e.price.toFixed(2)),totalValue:h(),estimatedCommission:.65*e.quantity}),U.o.success("Order preview generated successfully!")},variant:"outline",className:"w-full",disabled:0!==u().length,children:"Preview Order"}),(0,a.jsx)(o.$,{onClick:p,className:"w-full",variant:"buy"===e.action?"default":"destructive",disabled:0!==u().length||s,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Placing Order..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.A,{className:"h-4 w-4 mr-2"}),"buy"===e.action?"Buy to Open":"Sell to Open"]})})]}),0!==u().length&&(0,a.jsxs)(I.Fc,{variant:"destructive",children:[(0,a.jsx)(B.A,{className:"h-4 w-4"}),(0,a.jsx)(I.TN,{children:"Please fill in all required fields marked with *"})]})]})]})}var q=s(4879),V=s(9366),Z=s(8298),W=s(3616),_=s(2717),H=s(105),Q=s(251),J=s(5485),G=s(1514),Y=s(578);function X(){var e,t,s,n,l,c;let[m,h]=(0,r.useState)("AAPL"),[u,p]=(0,r.useState)("1M"),[g,j]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),{marketData:f,isConnected:b,getSymbolData:N}=function(e){let[t,s]=(0,r.useState)(new Map),[a,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let t=Q.N.channel("market-data");return t.on("broadcast",{event:"price-update"},t=>{let a=t.payload;(!e||e.includes(a.symbol))&&s(e=>new Map(e.set(a.symbol,a)))}).subscribe(e=>{i("SUBSCRIBED"===e),console.log("Market data subscription status:",e)}),()=>{Q.N.removeChannel(t)}},[e]),{marketData:t,isConnected:a,getSymbolData:e=>t.get(e),getAllData:()=>Array.from(t.values())}}([m]),w=N(m),k=(0,J.XC)().getStock(m),[S,A]=(0,r.useState)((null==k?void 0:k.price)||182.45),[C,T]=(0,r.useState)(0),[M,F]=(0,r.useState)(0),[E,P]=(0,r.useState)(!0),L=(0,r.useRef)(null),R=e=>{h(e),j([]),v([])};(0,r.useEffect)(()=>{if(w){let e={timestamp:new Date(w.timestamp).getTime(),price:w.price,volume:w.volume};if(j(t=>[...t.slice(-99),e]),A(w.price),T(w.change),F(w.changePercent),Math.abs(w.changePercent)>1){let e=O(w);e&&v(t=>[e,...t.slice(0,4)])}}},[w]),(0,r.useEffect)(()=>{(async()=>{if(k){let e=(0,J.XC)(),t=await e.generateRandomWalk(m,k.price,k.volatility,100),s=Date.now();j(t.map((e,t)=>({timestamp:s-(100-t)*6e4,price:e,volume:Math.floor(1e6*Math.random())+5e5}))),A(k.price)}})()},[m,k]),(0,r.useEffect)(()=>(E&&!L.current?L.current=setInterval(()=>{k&&(0,J.XC)().updatePrices()},3e4):!E&&L.current&&(clearInterval(L.current),L.current=null),()=>{L.current&&(clearInterval(L.current),L.current=null)}),[E,k]);let O=e=>{let t,s,a=Math.abs(e.changePercent);return a<.5?null:(e.changePercent>1.5?(t="buy",s="Strong upward momentum - Consider call options"):e.changePercent<-1.5?(t="sell",s="Bearish pressure detected - Put options recommended"):(t="neutral",s="Moderate volatility - Straddle strategy may be optimal"),{id:Math.random().toString(36).substr(2,9),type:t,strength:Math.min(50*a,100),price:e.price,message:s,timestamp:Date.now()})},z={labels:g.map(e=>new Date(e.timestamp)),datasets:[{label:"".concat(m," Price"),data:g.map(e=>e.price),borderColor:C>=0?"rgb(34, 197, 94)":"rgb(239, 68, 68)",backgroundColor:C>=0?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",borderWidth:2,fill:!0,tension:.1}]};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(Z.A,{className:"h-5 w-5"}),"Live Trading Chart",E&&(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),(0,a.jsx)(i.BT,{children:"Real-time price data with AI-powered trading signals"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(o.$,{variant:"1D"===u?"default":"outline",size:"sm",onClick:()=>p("1D"),children:"1D"}),(0,a.jsx)(o.$,{variant:"5D"===u?"default":"outline",size:"sm",onClick:()=>p("5D"),children:"5D"}),(0,a.jsx)(o.$,{variant:"1M"===u?"default":"outline",size:"sm",onClick:()=>p("1M"),children:"1M"}),(0,a.jsx)(o.$,{variant:"3M"===u?"default":"outline",size:"sm",onClick:()=>p("3M"),children:"3M"}),(0,a.jsx)(o.$,{variant:"1Y"===u?"default":"outline",size:"sm",onClick:()=>p("1Y"),children:"1Y"}),(0,a.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>{P(!E),!E&&L.current&&(clearInterval(L.current),L.current=null)},children:[E?"Pause":"Resume"," Live"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,a.jsx)(W.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"text-sm",children:b?"Live Data":"Connecting..."}),b&&(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:m,onChange:e=>R(e.target.value.toUpperCase()),className:"px-2 py-1 border rounded text-sm w-20",placeholder:"Symbol"}),(0,a.jsx)(d.E,{variant:"outline",children:m}),(0,a.jsxs)(d.E,{variant:"default",children:["$",S.toFixed(2)]}),(0,a.jsxs)(d.E,{variant:"secondary",className:C>=0?"text-green-600":"text-red-600",children:[C>=0?(0,a.jsx)(x.A,{className:"h-3 w-3 mr-1"}):(0,a.jsx)(D.A,{className:"h-3 w-3 mr-1"}),C>=0?"+":"","$",C.toFixed(2)," (",M>=0?"+":"",M.toFixed(2),"%)"]}),f&&Object.keys(f).length>0&&(0,a.jsxs)(d.E,{variant:"outline",children:[Object.keys(f).length," symbols"]})]})]}),(0,a.jsx)("div",{className:"h-96 bg-white rounded-lg border p-4",children:g.length>0?(0,a.jsx)(Y.N1,{data:z,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,callbacks:{label:e=>"Price: $".concat(e.parsed.y.toFixed(2))}}},scales:{x:{type:"time",time:{displayFormats:{minute:"HH:mm",hour:"HH:mm"}},grid:{display:!1}},y:{beginAtZero:!1,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{callback:e=>"$".concat(Number(e).toFixed(2))}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(Z.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading chart data..."})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Open"}),(0,a.jsxs)("div",{className:"font-medium",children:["$",(null==k||null==(e=k.open)?void 0:e.toFixed(2))||(null==w||null==(t=w.open)?void 0:t.toFixed(2))||"180.30"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"High"}),(0,a.jsxs)("div",{className:"font-medium",children:["$",(null==k||null==(s=k.high)?void 0:s.toFixed(2))||(null==w||null==(n=w.high)?void 0:n.toFixed(2))||Math.max(...g.map(e=>e.price)).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Low"}),(0,a.jsxs)("div",{className:"font-medium",children:["$",(null==k||null==(l=k.low)?void 0:l.toFixed(2))||(null==w||null==(c=w.low)?void 0:c.toFixed(2))||Math.min(...g.map(e=>e.price)).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Volume"}),(0,a.jsxs)("div",{className:"font-medium",children:[(null==k?void 0:k.volume)?(k.volume/1e6).toFixed(1):(null==w?void 0:w.volume)?(w.volume/1e6).toFixed(1):"45.2","M"]})]})]})]})})]}),y.length>0&&(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(_.A,{className:"h-5 w-5"}),"Live Trading Signals",(0,a.jsx)(d.E,{variant:"secondary",children:y.length})]}),(0,a.jsx)(i.BT,{children:"AI-powered trading opportunities based on real-time analysis"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:y.map(e=>(0,a.jsx)(I.Fc,{className:"border-l-4 ".concat("buy"===e.type?"border-l-green-500":"sell"===e.type?"border-l-red-500":"border-l-yellow-500"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:["buy"===e.type?(0,a.jsx)(x.A,{className:"h-4 w-4 text-green-600 mt-0.5"}):"sell"===e.type?(0,a.jsx)(D.A,{className:"h-4 w-4 text-red-600 mt-0.5"}):(0,a.jsx)(H.A,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(I.TN,{className:"font-medium",children:e.message}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:["Signal strength: ",e.strength.toFixed(0),"% | Price: $",e.price.toFixed(2)," |",new Date(e.timestamp).toLocaleTimeString()]})]})]}),(0,a.jsx)(d.E,{variant:"buy"===e.type?"default":"sell"===e.type?"destructive":"secondary",children:e.type.toUpperCase()})]})},e.id))})})]})]})}function K(){return(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),"Market Scanner"]}),(0,a.jsx)(i.BT,{children:"AI-powered trading opportunities"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:[{symbol:"NVDA",description:"High IV Rank",ivRank:85,action:"Sell Premium",probability:75,price:485.23,change:2.45},{symbol:"META",description:"Earnings Play",ivRank:92,action:"Straddle",probability:68,price:342.18,change:-1.23},{symbol:"AMZN",description:"Technical Breakout",ivRank:45,action:"Buy Calls",probability:72,price:145.67,change:3.89}].map((e,t)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:e.symbol}),(0,a.jsxs)(d.E,{variant:"outline",children:["$",e.price]}),(0,a.jsxs)(d.E,{variant:e.change>=0?"default":"destructive",children:[e.change>=0?"+":"",e.change,"%"]}),e.probability>70&&(0,a.jsx)(x.A,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,a.jsx)(o.$,{size:"sm",children:"Trade"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"IV Rank"}),(0,a.jsxs)("div",{className:"font-medium",children:[e.ivRank,"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Strategy"}),(0,a.jsx)("div",{className:"font-medium",children:e.action})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Success Rate"}),(0,a.jsxs)("div",{className:"font-medium text-green-600",children:[e.probability,"%"]})]})]})]},t))})})]})}s(1236),G.t1.register(G.PP,G.kc,G.FN,G.No,G.hE,G.m_,G.s$,G.UA);var ee=s(9672),et=s(2393),es=s(447);function ea(){let[e,t]=(0,r.useState)("50000"),[s,n]=(0,r.useState)("2500"),l=(()=>{let t=parseFloat(e)||0,a=parseFloat(s)||0,r=a/t*100;return{percentage:r,maxLoss:a,riskLevel:r>10?"high":r>5?"medium":"low"}})();return(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(et.A,{className:"h-5 w-5"}),"Risk Calculator"]}),(0,a.jsx)(i.BT,{children:"Position sizing and risk management"})]}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(g.J,{htmlFor:"portfolio-value",children:"Portfolio Value"}),(0,a.jsx)(c.p,{id:"portfolio-value",placeholder:"50000",value:e,onChange:e=>t(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g.J,{htmlFor:"position-size",children:"Position Size"}),(0,a.jsx)(c.p,{id:"position-size",placeholder:"2500",value:s,onChange:e=>n(e.target.value)})]}),(0,a.jsxs)("div",{className:"bg-muted p-4 rounded-lg space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Risk Percentage:"}),(0,a.jsxs)(d.E,{variant:"high"===l.riskLevel?"destructive":"medium"===l.riskLevel?"secondary":"default",children:[l.percentage.toFixed(2),"%"]})]}),(0,a.jsx)(ee.k,{value:Math.min(l.percentage,100),className:"h-2"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"Max Loss:"}),(0,a.jsxs)("span",{children:["$",l.maxLoss.toLocaleString()]})]}),"high"===l.riskLevel&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[(0,a.jsx)(es.A,{className:"h-4 w-4"}),"High risk position - consider reducing size"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-green-600 font-medium",children:"Low Risk"}),(0,a.jsx)("div",{className:"text-muted-foreground",children:"<5%"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-yellow-600 font-medium",children:"Medium Risk"}),(0,a.jsx)("div",{className:"text-muted-foreground",children:"5-10%"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-600 font-medium",children:"High Risk"}),(0,a.jsx)("div",{className:"text-muted-foreground",children:">10%"})]})]})]})]})}function er(){let[e,t]=(0,r.useState)("SPY");return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(l.default,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-6 space-y-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Stock Selector"}),(0,a.jsx)(i.BT,{children:"Select a stock to trade"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)(p,{onSelectStock:t,currentSymbol:e})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Trading Chart"}),(0,a.jsx)(i.BT,{children:"Visualize price and technicals"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)(X,{})})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Order Entry"}),(0,a.jsx)(i.BT,{children:"Place trades"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)($,{})})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Trading Tools"}),(0,a.jsx)(i.BT,{children:"Options, positions, scanner, and risk"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)(n.Tabs,{defaultValue:"chain",className:"space-y-4",children:[(0,a.jsxs)(n.TabsList,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(n.TabsTrigger,{value:"chain",children:"Options Chain"}),(0,a.jsx)(n.TabsTrigger,{value:"positions",children:"Positions"}),(0,a.jsx)(n.TabsTrigger,{value:"scanner",children:"Scanner"}),(0,a.jsx)(n.TabsTrigger,{value:"risk",children:"Risk"})]}),(0,a.jsx)(n.TabsContent,{value:"chain",className:"space-y-4",children:(0,a.jsx)(q.default,{})}),(0,a.jsx)(n.TabsContent,{value:"positions",className:"space-y-4",children:(0,a.jsx)(V.A,{})}),(0,a.jsx)(n.TabsContent,{value:"scanner",className:"space-y-4",children:(0,a.jsx)(K,{})}),(0,a.jsx)(n.TabsContent,{value:"risk",className:"space-y-4",children:(0,a.jsx)(ea,{})})]})})]})]})]})}},8541:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>l,TN:()=>c});var a=s(3365);s(1521);var r=s(2934),i=s(4130);let n=(0,r.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,i.cn)(n({variant:s}),t),...r})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,i.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}},9366:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s(3365),r=s(1521),i=s(8159),n=s(8005),l=s(3414),c=s(1951),o=s(3678),d=s(4209),m=s(2196),h=s(1971);function u(){let[e,t]=(0,r.useState)([]),[s,u]=(0,r.useState)(!0),[x,p]=(0,r.useState)(!1),g=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/positions"),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to fetch positions");t(s.positions||[])}catch(e){console.error("Error fetching positions:",e),h.o.error("Failed to fetch positions"),t([])}finally{u(!1),p(!1)}},[]),j=(0,r.useCallback)(async()=>{p(!0),await g()},[g]);(0,r.useEffect)(()=>{g();let e=()=>{j()};return window.addEventListener("orderPlaced",e),()=>window.removeEventListener("orderPlaced",e)},[g,j]);let y=async e=>{try{if(!(await fetch("/api/positions/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to close position");await j(),h.o.success("Position closed successfully")}catch(e){console.error("Error closing position:",e),h.o.error("Failed to close position")}},v=()=>{h.o.info("Roll position functionality coming soon")},f=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),b=e=>"".concat(e>0?"+":"").concat(e.toFixed(2),"%");return s?(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 animate-spin"}),"Loading Positions..."]})})}):(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ZB,{children:"Active Positions"}),(0,a.jsxs)(i.BT,{children:[e.length," active option",1!==e.length?"s":""]})]}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:j,disabled:x,children:[x?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(d.A,{className:"h-4 w-4"}),"Refresh"]})]})}),(0,a.jsx)(i.Wu,{children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)("p",{children:"No active positions"}),(0,a.jsx)("p",{className:"text-sm",children:"Place your first trade to see positions here"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(c.XI,{children:[(0,a.jsx)(c.A0,{children:(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nd,{children:"Contract"}),(0,a.jsx)(c.nd,{children:"Qty"}),(0,a.jsx)(c.nd,{children:"Avg Price"}),(0,a.jsx)(c.nd,{children:"Current"}),(0,a.jsx)(c.nd,{children:"P&L"}),(0,a.jsx)(c.nd,{children:"Greeks"}),(0,a.jsx)(c.nd,{children:"Actions"})]})}),(0,a.jsx)(c.BF,{children:e.map(e=>(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nA,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"font-medium",children:e.symbol}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.expiry," $",e.strike,e.type.charAt(0)]})]})}),(0,a.jsx)(c.nA,{children:(0,a.jsx)(l.E,{variant:e.quantity>0?"default":"destructive",children:e.quantity>0?"+".concat(e.quantity):e.quantity})}),(0,a.jsx)(c.nA,{children:f(e.avgPrice)}),(0,a.jsx)(c.nA,{children:f(e.currentPrice)}),(0,a.jsx)(c.nA,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"font-medium ".concat(e.pnl>=0?"text-green-600":"text-red-600"),children:f(e.pnl)}),(0,a.jsx)("div",{className:"text-sm ".concat(e.pnlPercent>=0?"text-green-600":"text-red-600"),children:b(e.pnlPercent)})]})}),(0,a.jsx)(c.nA,{children:(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{children:["Δ ",e.delta.toFixed(3)]}),(0,a.jsxs)("div",{children:["Θ ",e.theta.toFixed(3)]}),(0,a.jsxs)("div",{children:["Γ ",e.gamma.toFixed(3)]}),(0,a.jsxs)("div",{children:["ν ",e.vega.toFixed(2)]})]})}),(0,a.jsx)(c.nA,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>v(),children:[(0,a.jsx)(d.A,{className:"h-3 w-3"}),"Roll"]}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>y(e.id),children:[(0,a.jsx)(m.A,{className:"h-3 w-3"}),"Close"]})]})})]},e.id))})]})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9857,6911,6301,798,4778,1971,5370,9205,5054,2347,4870,7358],()=>t(1749)),_N_E=e.O()}]);