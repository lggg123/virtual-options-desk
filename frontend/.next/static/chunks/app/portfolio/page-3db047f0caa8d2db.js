(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5281],{1062:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(9766).A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},2443:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var i=s(5800),r=s(5924),n=s(7925),l=s(9398),a=s(5567),o=s(568);function c(){let[e,t]=(0,r.useState)([]),[s,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(0);async function x(){try{let e=await fetch("/api/positions");if(e.ok){let s=await e.json();t(s.positions||[]);let i=(s.positions||[]).reduce((e,t)=>e+t.currentPrice*t.quantity*100,0);u(i)}}catch(e){console.error("Error fetching positions:",e)}finally{c(!1)}}if((0,r.useEffect)(()=>{x()},[]),s)return(0,i.jsx)(n.Zp,{children:(0,i.jsx)(n.aR,{children:(0,i.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,i.jsx)(a.A,{className:"h-5 w-5 animate-spin"}),"Loading Portfolio..."]})})});if(0===e.length)return(0,i.jsxs)(n.Zp,{children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsx)(n.ZB,{children:"Portfolio Positions"}),(0,i.jsx)(n.BT,{children:"Current options positions breakdown"})]}),(0,i.jsx)(n.Wu,{children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,i.jsx)(o.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,i.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No positions yet"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground max-w-sm",children:"Start trading to build your portfolio. You have $100,000 in virtual cash to get started."})]})})]});let m=e.reduce((e,t)=>{let s=e.find(e=>e.symbol===t.symbol&&e.type===t.type),i=t.currentPrice*t.quantity*100;return s?(s.quantity+=t.quantity,s.value+=i):e.push({symbol:t.symbol,type:t.type,quantity:t.quantity,value:i,percentage:0}),e},[]);return m.forEach(e=>{e.percentage=d>0?e.value/d*100:0}),(0,i.jsxs)(n.Zp,{children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsx)(n.ZB,{children:"Portfolio Positions"}),(0,i.jsx)(n.BT,{children:"Current options positions breakdown"})]}),(0,i.jsx)(n.Wu,{children:(0,i.jsx)("div",{className:"space-y-6",children:m.map(e=>(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"font-medium",children:[e.symbol," ",e.type]}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.quantity," contracts"]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("div",{className:"font-medium",children:["$",e.value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.percentage.toFixed(1),"%"]})]})]}),(0,i.jsx)(l.k,{value:e.percentage,className:"h-2"})]},"".concat(e.symbol,"-").concat(e.type)))})})]})}},3613:(e,t,s)=>{Promise.resolve().then(s.bind(s,5038))},5038:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var i=s(5800),r=s(5924),n=s(7925),l=s(1171),a=s(2443),o=s(5596),c=s(8296);function d(){return(0,i.jsxs)(n.Zp,{children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsx)(n.ZB,{children:"Recent Trades"}),(0,i.jsx)(n.BT,{children:"Your latest options transactions"})]}),(0,i.jsx)(n.Wu,{children:(0,i.jsx)("div",{className:"space-y-4",children:[{id:1,symbol:"AAPL",type:"Call",strike:180,expiry:"2024-01-19",action:"BUY",quantity:5,price:3.25,time:"10:30 AM"},{id:2,symbol:"TSLA",type:"Put",strike:250,expiry:"2024-01-26",action:"SELL",quantity:3,price:8.5,time:"11:15 AM"},{id:3,symbol:"SPY",type:"Call",strike:450,expiry:"2024-01-12",action:"BUY",quantity:10,price:2.15,time:"2:45 PM"}].map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"font-medium",children:[e.symbol," ",e.strike,e.type.charAt(0)," ",e.expiry]}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.quantity," contracts @ $",e.price]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)(c.E,{variant:"BUY"===e.action?"default":"secondary",children:e.action}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:e.time})]})]},e.id))})})]})}var u=s(5161);function x(){var e,t,s;let[c,x]=(0,r.useState)(null),[m,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let{data:{user:e},error:t}=await u.N.auth.getUser();if(t||!e){console.error("Error fetching user:",t),h(!1);return}let{data:s,error:i}=await u.N.from("profiles").select("*").eq("id",e.id).single();i?console.log("No profile found, using defaults:",i):console.log("Profile loaded:",s),x({id:e.id,email:e.email,portfolio_value:1e5,open_positions:0,total_return:0})}catch(e){console.error("Exception fetching profile:",e),h(!1)}finally{h(!1)}})()},[]);let p=null!=(e=null==c?void 0:c.portfolio_value)?e:1e5,j=null!=(t=null==c?void 0:c.open_positions)?t:0,f=null!=(s=null==c?void 0:c.total_return)?s:0;return(0,i.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,i.jsx)(l.default,{}),(0,i.jsxs)("main",{className:"container mx-auto px-4 py-6 space-y-6",children:[(0,i.jsxs)(n.Zp,{children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsx)(n.ZB,{className:"text-3xl font-bold",children:"Portfolio"}),(0,i.jsxs)(n.BT,{children:["Track your positions and performance across all your options trades",(null==c?void 0:c.email)&&" - ".concat(c.email)]})]}),(0,i.jsx)(n.Wu,{children:m?(0,i.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Loading portfolio data..."}):(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,i.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",p.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Value"})]}),(0,i.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:j}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Open Positions"})]}),(0,i.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,i.jsxs)("div",{className:"text-2xl font-bold ".concat(f>=0?"text-orange-600":"text-red-600"),children:[f>=0?"+":"",f.toFixed(1),"%"]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Return"})]})]})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,i.jsx)(a.default,{}),(0,i.jsx)(o.A,{})]}),(0,i.jsx)("div",{children:(0,i.jsx)(d,{})})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3899,2164,8626,8862,1599,9196,5596,7116,9683,7358],()=>t(3613)),_N_E=e.O()}]);