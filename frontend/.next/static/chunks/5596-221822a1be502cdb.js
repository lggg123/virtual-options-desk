"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5596],{5596:(e,t,s)=>{s.d(t,{A:()=>u});var r=s(5800),n=s(5924),i=s(7925),a=s(6631),c=s(8296),o=s(6397),l=s(5567),d=s(1062),x=s(9505),h=s(9423);function u(){let[e,t]=(0,n.useState)([]),[s,u]=(0,n.useState)(!0),[m,v]=(0,n.useState)(!1),j=(0,n.useCallback)(async()=>{try{let e=await fetch("/api/positions"),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to fetch positions");t(s.positions||[])}catch(e){console.error("Error fetching positions:",e),h.o.error("Failed to fetch positions"),t([])}finally{u(!1),v(!1)}},[]),p=(0,n.useCallback)(async()=>{v(!0),await j()},[j]);(0,n.useEffect)(()=>{j();let e=()=>{p()};return window.addEventListener("orderPlaced",e),()=>window.removeEventListener("orderPlaced",e)},[j,p]);let f=async e=>{try{if(!(await fetch("/api/positions/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to close position");await p(),h.o.success("Position closed successfully")}catch(e){console.error("Error closing position:",e),h.o.error("Failed to close position")}},b=()=>{h.o.info("Roll position functionality coming soon")},g=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),y=e=>"".concat(e>0?"+":"").concat(e.toFixed(2),"%");return s?(0,r.jsx)(i.Zp,{children:(0,r.jsx)(i.aR,{children:(0,r.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(l.A,{className:"h-5 w-5 animate-spin"}),"Loading Positions..."]})})}):(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.ZB,{children:"Active Positions"}),(0,r.jsxs)(i.BT,{children:[e.length," active option",1!==e.length?"s":""]})]}),(0,r.jsxs)(a.$,{variant:"outline",size:"sm",onClick:p,disabled:m,children:[m?(0,r.jsx)(l.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(d.A,{className:"h-4 w-4"}),"Refresh"]})]})}),(0,r.jsx)(i.Wu,{children:0===e.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)("p",{children:"No active positions"}),(0,r.jsx)("p",{className:"text-sm",children:"Place your first trade to see positions here"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(o.XI,{children:[(0,r.jsx)(o.A0,{children:(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nd,{children:"Contract"}),(0,r.jsx)(o.nd,{children:"Qty"}),(0,r.jsx)(o.nd,{children:"Avg Price"}),(0,r.jsx)(o.nd,{children:"Current"}),(0,r.jsx)(o.nd,{children:"P&L"}),(0,r.jsx)(o.nd,{children:"Greeks"}),(0,r.jsx)(o.nd,{children:"Actions"})]})}),(0,r.jsx)(o.BF,{children:e.map(e=>(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nA,{children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"font-medium",children:e.symbol}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.expiry," $",e.strike,e.type.charAt(0)]})]})}),(0,r.jsx)(o.nA,{children:(0,r.jsx)(c.E,{variant:e.quantity>0?"default":"destructive",children:e.quantity>0?"+".concat(e.quantity):e.quantity})}),(0,r.jsx)(o.nA,{children:g(e.avgPrice)}),(0,r.jsx)(o.nA,{children:g(e.currentPrice)}),(0,r.jsx)(o.nA,{children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"font-medium ".concat(e.pnl>=0?"text-green-600":"text-red-600"),children:g(e.pnl)}),(0,r.jsx)("div",{className:"text-sm ".concat(e.pnlPercent>=0?"text-green-600":"text-red-600"),children:y(e.pnlPercent)})]})}),(0,r.jsx)(o.nA,{children:(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{children:["Δ ",e.delta.toFixed(3)]}),(0,r.jsxs)("div",{children:["Θ ",e.theta.toFixed(3)]}),(0,r.jsxs)("div",{children:["Γ ",e.gamma.toFixed(3)]}),(0,r.jsxs)("div",{children:["ν ",e.vega.toFixed(2)]})]})}),(0,r.jsx)(o.nA,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(a.$,{variant:"outline",size:"sm",onClick:()=>b(),children:[(0,r.jsx)(d.A,{className:"h-3 w-3"}),"Roll"]}),(0,r.jsxs)(a.$,{variant:"outline",size:"sm",onClick:()=>f(e.id),children:[(0,r.jsx)(x.A,{className:"h-3 w-3"}),"Close"]})]})})]},e.id))})]})})})]})}},6397:(e,t,s)=>{s.d(t,{A0:()=>a,BF:()=>c,Hj:()=>o,XI:()=>i,nA:()=>d,nd:()=>l});var r=s(5800);s(5924);var n=s(4756);function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",t),...s})})}function a(e){let{className:t,...s}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function l(e){let{className:t,...s}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}},8296:(e,t,s)=>{s.d(t,{E:()=>o});var r=s(5800);s(5924);var n=s(986),i=s(4208),a=s(4756);let c=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,asChild:i=!1,...o}=e,l=i?n.DX:"span";return(0,r.jsx)(l,{"data-slot":"badge",className:(0,a.cn)(c({variant:s}),t),...o})}}}]);